# Check README.md for usage & style conventions.

AllCops:
  # we will opt-in to the rules we want.
  DisabledByDefault: true

  # don't check style on generated files.
  Exclude:
    - 'tmp/**/*'
    - 'db/schema.rb'
    - 'bin/*'
    - 'spec/dummy/db/schema.rb'
    - 'spec/dummy/bin/*'
    - 'app/models/protobuf/**/*'

# codifying current rubocop defaults
# establish our own baseline in case the project's defaults are changed
#
# flagging this as 'refactor'-level because they're so arbitrary
# tempted to do the same for cyclomatic complexity, perceived complexity, etc.
# will hold off on that for now, but PRs/discussion are welcome.
Metrics/AbcSize:
  Enabled: true
  Max: 25
  Severity: refactor


# writing long var names as a way of self-documenting shouldn't be discouraged
# also allowing URLs & etc so as not to require artifically breaking apart
# non-code strings. (this is current default already, but let's be explicit.)
#
# "It's like writing on a roll of toilet paper." - George Riley
Metrics/LineLength:
  Enabled: true
  Max: 100
  AllowHeredoc: true
  AllowURI: true
  URISchemes:
    - http
    - https


Metrics/MethodLength:
  Enabled: true
  Max: 25
  Severity: refactor


# expect {
#   a_thing
# }.to raise_error
#
# is fine.
Style/BlockDelimiters:
  Enabled: true
  EnforcedStyle: braces_for_chaining



# comments explaining the purpose of a class are a good thing.
# but they're unecessary in a few cases:
#
#   - migration classes. the purpose of a migration is obvious.
#   - classes in a dummy application.
Style/Documentation:
  Enabled: true
  Exclude:
    - 'db/migrate/*'
    - 'spec/dummy/**/*'


# Having a lot of code in a block is probably not a great thing.  But in specs,
# it's actually great, because spec frameworks like RSpec use blocks to define
# scopes of specs. It seems like specs are not what this rule was aimed at.
#
#     RSpec.describe User do
#       # All your specs go in here.
#     end
#
# Same goes for routes - those blocks can get pretty long.
# Borrowed from https://github.com/NobodysNightmare/rubocop/commit/99124543155b728b495560ab9e2a88ff597e1899#diff-e93280b3b31a6438c533a5f3232340d8R1179
Metrics/BlockLength:
  Enabled: true
  ExcludedMethods:
    - context
    - describe
    - it
    - shared_examples
    - shared_examples_for
    - namespace
    - draw
